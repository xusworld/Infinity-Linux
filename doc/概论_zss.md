## 基本概念

### 中断

中断是现代操作系统中最重要的一个概念，中断指的是操作系统暂停CPU上正在运行的进程，并执行相应的中断处理程序。操作系统会在处理器每执行一条指令后检查系统内是否有中断请求，如果有则中断当前运行的进程并进行中断处理。根据发生中断的原因不同，中断可以分为内中断(异常)和外中断。

### 多道程序设计

为了充分利用计算机资源，同时将多个任务放入内存中，并通过一定的调度策略运行所有进程。

### 内核态和用户态

内核态和用户态是CPU的运行两种运行状态，操作系统的内核程序运行在内核态，用户程序则在用户态下运行。

### 特权指令

将能够引起损害的机器指令作为特权指令，特权指令只能在内核态下执行，因此特权指令都放在操作系统的内核程序中，作为操作系统的一部分。

### 进程管理

进程是程序的一次动态执行过程，是一个活动的实体。操作系统引入进程是为了更好地控制程序在计算机中的执行，特别是在采用多道程序设计的操作系统中，通过进程保证程序运行的有效性和正确性。

### 内存管理

内存是进程活动的空间，内存空间越大，可同时放入内存中的进程数越多，有利于充分利用CPU等资源。内存往往比较昂贵的，对内存的使用需要谨慎，这样才能最大程度地利用好有限的内存空间。



## 课后习题

**1.1 在多道程序和分时环境中，多个用户同时共享一个系统。这种情况可能导致各种安全问题。**

​	**a. 列出两个这类问题。**

​	

​	**b. 我们是否能够确保分时系统达到如同专用系统一样的安全程度？请解释你的答案。**

​	不能

**1.2 对于资源利用问题，不同类型操作系统具有不同处理方式。针对以下情况，哪些应对资源加以认真管理：**

​	**a. 大型机或小型机**

​	**b. 与服务器相连的工作站**

​	**c. 移动计算机**

​	大型机或小型机是同时给多个用户使用的计算机，这些用户共享资源并且可以交换信息。为了确保所有的CPU实践、内存和I/O都能得到有效使用，并且确保没有用户使用超过限额以外的资源，因此需要对资源加以认真管理。

​	在使用与服务器相连的工作站时，用户不仅可以使用专用资源，也可以使用网络和服务器的共享资源，这类操作系统的设计需要兼顾使用的方便性和资源的利用率。因此，只需要对资源进行适当地管理。

​	大多数移动计算机是为单个用户单独使用，其主要目的是优化用户进行的工作，用户使用的方便性是主要的设计目标，因此对资源是否认真管理没有强制要求。

**1.3 在何种环境下，分时系统优于PC或单用户工作站？**



**1.4 讨论对称多处理和非对称多处理的区别。多处理系统有哪三个优点和哪一个缺点？**

​	非对称多处理系统中，每个处理器都有各自特定的任务，由一个主处理器控制系统，其它处理器向主处理器要任务或者做预先规定的任务。它们之间是主从关系，主处理器调度从处理器并安排工作。
​	而在对称多处理系统中，所有的处理器都是对等的一起完成操作系统的所有任务，它们之间没有主从关系。

​	多处理器的三个优点：增加系统吞吐量、规模经济和增加可靠性。
​	一个缺点：操作系统对多处理器系统的管理策略比较复杂。

**1.5 集群系统与多处理器系统有何不同？如何让同一集群的两个机器互相协作以便提供高可用性服务？**

​	与多处理器系统不同，集群系统是由两个或多个独立系统组成，这样的系统具有松耦合的特性，每个独立系统都可以是单处理器系统或多处理器系统。

​	集群中的一个机器都执行集群软件层，监视另一个机器的执行，如果机器失效，那么监视机能够取代存储的拥有权，并重新启动在失效机器上运行的应用程序。

**1.6 现有一个运行数据库的两个节点集群。给出两种方法，以便集群软件管理磁盘数据访问。讨论每种方法的优点和缺点。**



**1.7 网络计算机与传统计算机有何不同？讨论在哪些情况下采用网络计算机更为有利。**

​	网络计算机依靠的是中央计算机，终端只需实现简单的功能，复杂的计算和服务由中央计算机提供支持；而传统计算机是具有完整的功能。

**1.8 中断有何用途？中断和陷阱有何不同？用户程序能否有意产生陷阱？如果能，为什么？**

​	中断是操作系统的灵魂，中断是实现多道程序设计、提升系统资源利用率的基础。通常来说，中断指的是外中断，是由来自系统外的中断信号产生的；陷阱又可以称为异常，是由程序本身运行时发生的中断，如除零异常等。用户程序能够有意产生陷阱，当用户程序进行系统调用时，操作系统会中断当前进程，处理器转为内核态执行操作系统指令，此时的陷阱就是由用户程序主动产生的。

**1.9 直接内存访问用于告诉I/O设备，以避免CPU日益增加的运行负荷。**

​	**a. CPU与设备如何协作传递？**

​	CPU为I/O设备设置好缓冲、指针和计数器之后，由设备控制器直接控制本地缓存和内存之间整块数据的传送。

​	**b. CPU如何得知内存操作何时结束？**

​	在一块数据传送完成之后，设备会向操作系统发送一个中断信号告知设备驱动程序内存操作已完成。

​	**c. 当DMA控制器传递数据时，允许CPU执行用户程序。这两者会不会冲突？如果会，讨论会产生何种冲突。**

​	不会产生冲突，DMA控制器传递数据只需要CPU提前告知数据缓存的位置和大小，数据传递过程中是无需CPU干预的，当数据传送完成后设备会向系统发送中断信号请求CPU处理数据。

**1.10 有些计算机系统不支持硬件运行的特权模式。能否为这些计算机系统构建一种安全操作系统？请给出行或不行的理由。**



**1.11 许多SMP系统有不同层次的缓存，有的缓存是为单个处理核专用的，而有的缓存是为所有处理核共用的。为什么这么设计缓存？**

​	不同的层次是基于访问的速度和大小，缓存离CPU越近，访问速度就越快，价格也就更高，因此该类缓存的容量通常也较小。所以更小更快的缓存放置在每个CPU的本地缓存上，较大但较慢的共享缓存为所有处理器提供缓存。

**1.12 现有一个类似图1-6所示的SMP系统。举例说明，为什么内存数据有可能不同于本地缓存数据。**

​	在SMP系统中，如图中所示，系统中的多个处理器可能同时处理同一块内存上的数据，为了解决CPU与内存速度不一致问题而引入的高速缓存中会保留内存数据的副本，在处理器对数据修改后会重新写回内存，此时其它的处理器的高速缓存中的数据没有更新就会与内存数据不一致。

**1.13 举例说明在下列环境下，如何维护高速缓存一致性：**

​	**a. 单处理器系统**

​	**b. 多处理器系统**

​	**c. 分布式系统**

**1.14 请描述一种机制以加强内存保护，防止一个程序修改与其它程序相关的内存。**

​	为每个进程分配内存空间，在执行进程的指令时进行地址越界检查。

**1.15 什么类型的网络(LAN或WAN)最能适合以下情况？**

​	**a. 大学校园的学生会**

​	LAN

​	**b. 一个大学的多个省内校园**	

​	WAN

​	**c. 邻里之间**

​	LAN

**1.16 与传统PC的操作系统相比，移动设备操作系统的设计有何难点？**



**1.17 与客户机-服务器系统相比，对等系统有何优点？**

​	在客户机-服务器系统中，服务器是个瓶颈；但是在对等系统中，分布在整个网络内的多个节点都可以提供服务。

**1.18 哪些分布应用适合采用对等系统？**

​	文件交换、语音通话、视频通话

**1.19 请给出开源操作系统的优缺点，也请给出各自的支持者或反对者。**



